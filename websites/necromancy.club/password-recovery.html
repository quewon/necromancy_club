<link href="https://fonts.googleapis.com/css2?family=Crete+Round:ital@1&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://quewon.github.io/necromancy_club/global.css">

<style>
	.brief {
		border: 1px solid var(--primary);
		width: 50%;
		height: 50%;
		margin: auto;
		margin-top: 10%;
		padding: var(--font-size);
		line-height: 1.3;
	}
</style>

<body>
	<h1 onclick="parent.hyperlink('necromancy.club')">the necromancy club</h1>

	<div id="notdone" class="brief">
		<div id="status">enter an adminstrator email address.</div><br /><br />
		<div class="inputbar">
			<input id="email" contenteditable spellcheck="false" placeholder="admin@spark.inc" autocomplete="off"></input><button style="float:right" onclick="check_input()">go!</button>
			<a onclick="parent.hyperlink('necromancy.club')" style='font-size:0.8em'>Back to the main page</a>
		</div>
	</div>

	<div id="done" class="brief" style="display:none">
		the password has been sent to the mailing address. we recommend changing your password to something more memorable... or writing it down on a piece of paper!<br />
		<a onclick="parent.hyperlink('necromancy.club')" style='font-size:0.8em'>Back to the main page</a>
	</div>
</body>
<script>
	var email = document.getElementById("email");
	document.querySelector('input').addEventListener("keypress", function(e) {
		let k = event.keyCode || event.which;
		if (k===13) {
			event.preventDefault();
			check_input()
		}
	})
	function check_input() {
		if (parent.nc.admin_emails.includes(email.value)) {
			done()
		} else {
			document.getElementById("status").textContent = "address is not a valid administrator email."
		}
		email.value = "";
	}
	function done() {
		parent.mail.create("SparkTech_Service", "necromancy.club admin password recovery", parent.dialog.MAIL2);

		document.getElementById("notdone").style.display = "none";
		document.getElementById("done").style.display = "block";
	}
</script>