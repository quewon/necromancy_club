<link href="https://fonts.googleapis.com/css2?family=Crete+Round:ital@1&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://quewon.github.io/necromancy_club/global.css">

<style>
	.email {
		border: 1px solid var(--secondary);
		margin-bottom: var(--font-size);
		padding: var(--font-size);
	}
	#header {
		top: 0;
		padding: var(--font-size);
		border-bottom: 1px solid var(--secondary);
		margin-bottom: var(--font-size);
		width: calc(100% - 3 * var(--font-size));
		position: fixed;
	}
	.inputbar {
		position: relative;
		display: inline-block;
		float: right;
	}

	#container {
		top: calc(4 * var(--font-size));
		position: absolute;
		width: calc(100% - var(--font-size));
	}

	.icon {
		position: absolute;
		width: calc(2*var(--font-size));
		height: calc(2*var(--font-size));
		right: var(--font-size);
		filter: gray;
		-webkit-filter: grayscale(1);
		filter: grayscale(1);
	}
</style>

<body>
	<div id="header">
		inbox
		<div class="inputbar">
			<input id="search" contenteditable spellcheck="false" placeholder="search mail" autocomplete="off"></input><button onclick="check_input()">go!</button>
		</div>
	</div>
	<div id="container"></div>
</body>

<script>
	function print_all_mail() {
		let mail = parent.mail.inbox;
		let contacts = parent.mail.contacts;
		for (let i=0; i<mail.length; i++) {
			var div = document.createElement("div");
			div.className = "email";

			let img = new Image(100,100);
			img.src = contacts[mail[i].sender].icon;
			img.className = "icon";
			div.appendChild(img);

			div.innerHTML += `<a onclick="parent.hyperlink('email','` + mail[i].code + `')">` + mail[i].title + `</a><br />` + mail[i].sender;
			document.getElementById("container").appendChild(div);
		}
	}

	print_all_mail()
</script>